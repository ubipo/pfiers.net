var f=Object.defineProperty;var u=(n,t,o)=>t in n?f(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o;var i=(n,t,o)=>(u(n,typeof t!="symbol"?t+"":t,o),o);import{w as l}from"./index.8205a471.js";import"./markdown.abf9525d.js";class a extends Error{constructor(o,e=void 0){super(o);i(this,"name",this.constructor.name);this.message=o,this.cause=e}}function p(n){return typeof n=="object"&&n!==null}function h(n){const{projects:t,technologies:o,home:e}=n;for(const r of t)r.technologies=r.technologies.map(s=>o[s]);for(const r of o)r.projects=r.projects.map(s=>t[s]);return{home:e,projects:t,technologies:o}}function m(n){const t=JSON.parse(n,(o,e)=>{if(typeof e=="string"){if(e.startsWith("s"))return e.slice(1);if(e.startsWith("u"))return new URL(e.slice(1))}return e});if(!p(t)||!Array.isArray(t.projects))throw new a(`Failed to load content from JSON: invalid format ${n}`);return h(t)}async function y(n){const t=await n("/api/content");if(!t.ok)throw new a(`Failed to load content from API: ${t.status} ${t.statusText}`);const o=await t.text();return m(o)}let c=null;async function S(n){try{return{contentStore:await w(n)}}catch(t){return console.error(`Error loading site content: ${t}`),{contentError:t}}}async function w(n){if(c!=null)return c;const t=await y(n);return c=l(t),c}export{S as g};
