var f=Object.defineProperty;var u=(n,t,o)=>t in n?f(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o;var a=(n,t,o)=>(u(n,typeof t!="symbol"?t+"":t,o),o);import{w as l}from"./index.8205a471.js";import"./markdown.4b0db348.js";import{j as h}from"./url.35a8b54e.js";class i extends Error{constructor(o,e=void 0){super(o,{cause:e});a(this,"name",this.constructor.name);this.message=o,this.cause=e}}function p(n){return typeof n=="object"&&n!==null}function m(n){const{projects:t,technologies:o,home:e}=n;for(const r of t)r.technologies=r.technologies.map(s=>o[s]);for(const r of o)r.projects=r.projects.map(s=>t[s]);return{home:e,projects:t,technologies:o}}function w(n){const t=JSON.parse(n,(o,e)=>{if(typeof e=="string"){if(e.startsWith("s"))return e.slice(1);if(e.startsWith("u"))return new URL(e.slice(1))}return e});if(!p(t)||!Array.isArray(t.projects))throw new i(`Failed to load content from JSON: invalid format ${n}`);return m(t)}async function y(n){const t=await n("/api/content");if(!t.ok)throw new i(`Failed to load content from API: ${t.status} ${t.statusText}`);const o=await t.text();return w(o)}const C="/";h(C,"content/");let c=null;async function A(n){try{return{contentStore:await F(n)}}catch(t){return console.error(`Error loading site content: ${t}`),{contentError:t}}}async function d(n){return async o=>{const e=await n(o);if(!e.ok){if(e.status===404)return;throw new g(`File ${o}: ${e.status}`)}return await e.text()}}async function F(n){if(c!=null)return c;await d(n);const t=await y(n);return c=l(t),c}class g extends i{}export{A as g};
